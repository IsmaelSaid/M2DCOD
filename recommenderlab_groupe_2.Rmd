---
title: "Guide d'utilisation recommenderlab"
output:
  pdf_document: default
  html_document: default
date: "2022-10-28"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library("recommenderlab")
```

# Chargment des fichiers 
```{r}
anime_history <-read.csv("datasets/anime/anime_history.dat",header = TRUE, sep = "\t")
anime_info <-read.csv("datasets/anime/anime_info.dat",header = TRUE, sep = "\t")
anime_ratings <-read.csv("datasets/anime/anime_ratings.dat",header = TRUE, sep = "\t")
```

# Coercition
La coercition consiste à convertir un objet en une classe donnée
Par défaut, read.csv retourne un data.frame. Il est necessaire de le transformer
vers un format adapté pour pouvoir y faire des opérations supplémentaires.

## Dataframe 

```{r}
#on affiche les colonnes(1 à 5) et lignes (1 à 3) de la matrice
anime_ratings[1:5,1:3]
```
## coercition du data.frame vers un objet Matrix
```{r}
matrix_rating <- as(anime_ratings,'Matrix')
class(x = matrix_rating) #on vérifie la classe de l'objet apres la coercition
```

## méthodes utilisables par ratingMatrix et ses sous-classes 
##binaryRatingMatrix ainsi que realRatingMatrix
L'interface ratingMatrix implémente de nombreuses méthodes 
disponibles pour les objets de type Matrix
```{r}
#voir les dimension de la matrice
print("Dimension de la matrice:")
dim(matrix_rating)
# On peut pas vraiment faire la somme de ses colonnes. 
print("Somme des colonnes:")
colSums(matrix_rating)
print("Moyenne des Feedbacks:")
# On peut récupérer uniquement la moyenne du feebdack.
colMeans(matrix_rating)['Feedback']
```

## data.frame vers realratingsMatrix
Il est plus facile de selectionner les utilisateurs et les items que l'on souhaite 
manipuler et les comparer avec les real_rattings_matrix.
```{r}
anime_ratings_real_ratings_matrix <- as(anime_ratings,'realRatingMatrix')
dimnames(anime_ratings_real_ratings_matrix)
```


```{r}
#getRatingMatrix(anime_ratings_real_ratings_matrix)
```

## Visualisation
On peut utiliser un real_ratings_matrix pour visualiser les selections.
```{r}
image(anime_ratings_real_ratings_matrix[1:10,1:30])
```

## Visualisation
On peut utiliser un real_ratings_matrix pour visualiser les selections.
```{r}
hist(getRatings(anime_ratings_real_ratings_matrix),breaks = 10,labels = TRUE)

```
